{% extends 'base.html' %}
{% block title %}时间选择{% endblock %}

<!--link rel="stylesheet/less" href="less/bootstrap.less" type="text/css" /-->
<!-- link rel="stylesheet/less" href="less/responsive.less" type="text/css" / -->
<!--script src="js/less-1.3.3.min.js"></script-->
<!--append ‘#!watch’ to the browser URL, then refresh the page. -->
{% block staticfiles %}
{% load staticfiles %}
<link href='{% static "css/bootstrap.min.css" %}' rel="stylesheet">
<link href='{% static "css/style.css" %}' rel="stylesheet">

<link href='{% static "css/bootstrap-datetimepicker.min.css" %}' rel="stylesheet">

<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="js/html5shiv.js"></script>
<![endif]-->

<!-- Fav and touch icons -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href='{% static "img/apple-touch-icon-144-precomposed.png" %}'>
<link rel="apple-touch-icon-precomposed" sizes="114x114" href='{% static "img/apple-touch-icon-114-precomposed.png" %}'>
<link rel="apple-touch-icon-precomposed" sizes="72x72" href='{% static "img/apple-touch-icon-72-precomposed.png" %}'>
<link rel="apple-touch-icon-precomposed" href='{% static "img/apple-touch-icon-57-precomposed.png" %}'>
<link rel="shortcut icon" href='{% static "img/favicon.png" %}'>

<script type="text/javascript" src='{% static "js/jquery.min.js" %}'></script>
<script type="text/javascript" src='{% static "js/bootstrap.min.js" %}'></script>
<script type="text/javascript" src='{% static "js/scripts.js" %}'></script>

{% endblock %}
{% block other %}
<div class="row clearfix">
    <div class="col-md-4"></div>
    <div class="col-md-4">
        <h2>历史记录检索时间选择</h2>
        <form class="form" action="/history_res/">
            <div class="form-group">
                <label for="start_time">起始时间</label>
                <input type="date" name="start" class="form-control" id="start_time">
            </div>
            <div class="form-group">
                <label for="start_time">结束时间</label>
                <input type="date" name="end" class="form-control" id="end_time">
            </div>
            <input style="display: none" name="type" value="{{ form_type }}">
            <button type="button" class="btn btn-success btn-block" onclick="return OnSub(this)">确定</button>
        </form>
    </div>
    <div class="col-md-4"></div>
</div>

<script>
    //表单验证代码
    function OnSub(n){
        var form = n.parentNode;
        var start_time = new Date(document.getElementById("start_time").value);
        var end_time = new Date(document.getElementById("end_time").value);
        if (end_time.valueOf() >= start_time.valueOf()){
            form.submit();
        }else{
            alert('日期选择有误');
            return ;
        }
    }
</script>

</body>
</html>
{% endblock %}